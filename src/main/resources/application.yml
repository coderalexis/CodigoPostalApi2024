spring:
  application:
    name: CodigoPostalApi
  profiles:
    active: ${SPRING_PROFILE:dev}  # Perfil por defecto: dev

zipcode:
  file:
    path: C:/home/CPdescarga.txt

server:
  port: 8080
  compression:
    enabled: true
    mime-types: application/json,application/xml,text/html,text/xml,text/plain
    min-response-size: 1024
  tomcat:
    threads:
      max: 200
      min-spare: 20
    max-connections: 10000
    accept-count: 100

# Virtual Threads (Java 21+)
spring.threads.virtual.enabled: true

springdoc:
  swagger-ui:
    path: /swagger-ui.html

logging:
  level:
    com.coderalexis.CodigoPostalApi: INFO
    org.springframework.web: WARN

management:
  endpoints:
    web:
      exposure:
        # Solo exponer endpoints necesarios (seguridad mejorada)
        include: health,info,prometheus,metrics
      base-path: /actuator
  endpoint:
    health:
      show-details: when-authorized
      show-components: when-authorized
    prometheus:
      enabled: true
    info:
      enabled: true
  metrics:
    tags:
      application: ${spring.application.name}
      environment: ${spring.profiles.active}
  info:
    env:
      enabled: true
    java:
      enabled: true
    os:
      enabled: true
  prometheus:
    metrics:
      export:
        enabled: true

# Configuraci√≥n de Rate Limiting por defecto (se sobrescribe en cada perfil)
ratelimit:
  enabled: false
  requests-per-minute: 1000
  ip-based: true
